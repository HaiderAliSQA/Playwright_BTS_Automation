"use strict";(self.webpackChunkems=self.webpackChunkems||[]).push([[10],{4318:function(D,g,s){s.d(g,{$:function(){return m}});var t=s(529),_=s(7716),u=s(8393),v=s(1831);let m=(()=>{class d extends t.d{constructor(i,l){super("/bts/api/v1/log",i),this.provider=i,this.util=l}getAllLogs(i=null,l=null,c=null,C=50,A=0){let f=this.util.getQueryMethod({pageSize:C,pageNo:A,createdById:i,logType:c,id:l});return this.getList(`/search/${f}`)}searchLogs(i,l=10,c=0){return this.save(i,`/search/login-logs?pageSize=${l}&pageNo=${c}`)}downloadLoginLogs(i){return this.downloadPost("/export-to-excel/login-logs",i)}downloadUserLogs(i){return this.downloadPost("/export-to-excel/user-logs",{createdById:i.userId,endDate:null,relatedTo:null,startDate:null,type:null})}}return d.\u0275fac=function(i){return new(i||d)(_.LFG(u.U),_.LFG(v.Z))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},7423:function(D,g,s){s.d(g,{C:function(){return v}});var t=s(7716),_=s(2875),u=s(1321);let v=(()=>{class m{constructor(o){this.confirmDialog=o,this.showEditBtn=!0,this.showDuplicateBtn=!1,this.showViewBtn=!1,this.showDownloadBtn=!1,this.showPostBtn=!1,this.showUnpostBtn=!1,this.showApproveBtn=!1,this.showUnapproveBtn=!1,this.showBillBtn=!1,this.showDeleteBtn=!0,this.inputItem=null,this.editPermission=null,this.deletePermission=null,this.showConfirmDialog=!0,this.showPostDialog=!0,this.showPocBtn=!1,this.showFileBtn=!1,this.showActiveBtn=!1,this.showRemoveCaseLoadBtn=!1,this.activeConfirmMsg="Are you sure you want to change the status for the selected user?",this.confirmMsg="Are you sure you want to permanantly delete selected item?",this.postConfirmMsg="Are you sure you want to post  selected item?",this.edit=new t.vpe,this.duplicate=new t.vpe,this.delete=new t.vpe,this.view=new t.vpe,this.post=new t.vpe,this.unpost=new t.vpe,this.approve=new t.vpe,this.unapprove=new t.vpe,this.bill=new t.vpe,this.poc=new t.vpe,this.active=new t.vpe,this.removeCaseLoad=new t.vpe,this.FileView=new t.vpe}ngOnInit(){}onDeleteClicked(){this.showConfirmDialog?this.openConfirmDialog():this.delete.emit()}onEditClicked(){this.edit.emit(this.inputItem)}onRemoveCaseLoadClicked(){this.removeCaseLoad.emit(this.inputItem)}onDuplicateClicked(){this.duplicate.emit(this.inputItem)}onViewClicked(){this.view.emit(this.inputItem)}onActiveClicked(){this.showConfirmDialog?this.showActiveConfirmDialog():this.active.emit()}onPostClicked(){this.showPostDialog?this.showPostConfirmDialog():this.post.emit()}onUnpostClicked(){this.showConfirmDialog?this.showUnpostConfirmDialog():this.unpost.emit(this.inputItem)}onApproveClicked(){this.showConfirmDialog?this.showApproveConfirmDialog():this.approve.emit(this.inputItem)}onUnapproveClicked(){this.showConfirmDialog?this.showUnapproveConfirmDialog():this.unapprove.emit(this.inputItem)}onBillClicked(){this.showConfirmDialog?this.showBillConfirmDialog():this.bill.emit(this.inputItem)}onFileClicked(){this.FileView.emit()}onPocClick(){this.poc.emit(this.inputItem)}openConfirmDialog(){this.confirmDialog.confirm(this.confirmMsg).then(o=>{o&&this.delete.emit(this.inputItem)}).catch(()=>{console.log("User dismissed the dialog")})}showPostConfirmDialog(){this.confirmDialog.confirm(this.postConfirmMsg).then(o=>{o&&this.post.emit(this.inputItem)}).catch(()=>{console.log("User dismissed the dialog")})}showUnpostConfirmDialog(){this.confirmDialog.confirm(this.confirmMsg).then(o=>{o&&this.unpost.emit(this.inputItem)}).catch(()=>{console.log("User dismissed the dialog")})}showApproveConfirmDialog(){this.confirmDialog.confirm(this.confirmMsg).then(o=>{o&&this.approve.emit(this.inputItem)}).catch(()=>{console.log("User dismissed the dialog")})}showUnapproveConfirmDialog(){this.confirmDialog.confirm(this.confirmMsg).then(o=>{o&&this.unapprove.emit(this.inputItem)}).catch(()=>{console.log("User dismissed the dialog")})}showBillConfirmDialog(){this.confirmDialog.confirm(this.confirmMsg).then(o=>{o&&this.bill.emit(this.inputItem)}).catch(()=>{console.log("User dismissed the dialog")})}showActiveConfirmDialog(){this.confirmDialog.confirm(this.activeConfirmMsg).then(o=>{o&&this.active.emit(this.inputItem)}).catch(()=>{console.log("User dismissed the dialog")})}}return m.\u0275fac=function(o){return new(o||m)(t.Y36(_.O))},m.\u0275cmp=t.Xpm({type:m,selectors:[["edit-delete-btns"]],inputs:{showEditBtn:"showEditBtn",showDuplicateBtn:"showDuplicateBtn",showViewBtn:"showViewBtn",showDownloadBtn:"showDownloadBtn",showPostBtn:"showPostBtn",showUnpostBtn:"showUnpostBtn",showApproveBtn:"showApproveBtn",showUnapproveBtn:"showUnapproveBtn",showBillBtn:"showBillBtn",showDeleteBtn:"showDeleteBtn",inputItem:"inputItem",editPermission:"editPermission",deletePermission:"deletePermission",showConfirmDialog:"showConfirmDialog",showPostDialog:"showPostDialog",showPocBtn:"showPocBtn",showFileBtn:"showFileBtn",showActiveBtn:"showActiveBtn",showRemoveCaseLoadBtn:"showRemoveCaseLoadBtn",activeConfirmMsg:"activeConfirmMsg",confirmMsg:"confirmMsg",postConfirmMsg:"postConfirmMsg"},outputs:{edit:"edit",duplicate:"duplicate",delete:"delete",view:"view",post:"post",unpost:"unpost",approve:"approve",unapprove:"unapprove",bill:"bill",poc:"poc",active:"active",removeCaseLoad:"removeCaseLoad",FileView:"FileView"},decls:27,vars:13,consts:[[1,"d-inline-block","w-100"],["title","Activate",1,"ng2-smart-action-delete-delete","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"fas","fa-redo","text-green"],["title","Delete",1,"ng2-smart-action-delete-delete","mr-2",3,"ngClass","click"],[1,"icon-trash","text-danger"],[1,"mdi","mdi-account-remove","text-danger"],["title","Copy",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"mdi","mdi-content-duplicate","text-info"],["title","Edit",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"icon-pencil","text-info"],["title","View",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"icon-eye","text-info"],["title","Files",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"icon-cloud-upload","text-info"],["title","Post",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"fa","fa-regular","fa-share"],["title","Unpost",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"fa","fa-regular","fa-reply"],["title","Approve",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"icon-like","text-info"],["title","Bill",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"mdi","mdi-credit-card","text-info"],["title","Unapprove",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"icon-dislike","text-info"],["title","Poc",1,"ng2-smart-action-edit-edit","mr-2",2,"margin-top","2px",3,"ngClass","click"],[1,"mdi","mdi-account-multiple-plus"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"a",1),t.NdJ("click",function(){return i.onActiveClicked()}),t._UZ(2,"span",2),t.qZA(),t.TgZ(3,"a",3),t.NdJ("click",function(){return i.onDeleteClicked()}),t._UZ(4,"span",4),t.qZA(),t.TgZ(5,"a",3),t.NdJ("click",function(){return i.onRemoveCaseLoadClicked()}),t._UZ(6,"span",5),t.qZA(),t.TgZ(7,"a",6),t.NdJ("click",function(){return i.onDuplicateClicked()}),t._UZ(8,"span",7),t.qZA(),t.TgZ(9,"a",8),t.NdJ("click",function(){return i.onEditClicked()}),t._UZ(10,"span",9),t.qZA(),t.TgZ(11,"a",10),t.NdJ("click",function(){return i.onViewClicked()}),t._UZ(12,"span",11),t.qZA(),t.TgZ(13,"a",12),t.NdJ("click",function(){return i.onFileClicked()}),t._UZ(14,"span",13),t.qZA(),t.TgZ(15,"a",14),t.NdJ("click",function(){return i.onPostClicked()}),t._UZ(16,"span",15),t.qZA(),t.TgZ(17,"a",16),t.NdJ("click",function(){return i.onUnpostClicked()}),t._UZ(18,"span",17),t.qZA(),t.TgZ(19,"a",18),t.NdJ("click",function(){return i.onApproveClicked()}),t._UZ(20,"span",19),t.qZA(),t.TgZ(21,"a",20),t.NdJ("click",function(){return i.onBillClicked()}),t._UZ(22,"span",21),t.qZA(),t.TgZ(23,"a",22),t.NdJ("click",function(){return i.onUnapproveClicked()}),t._UZ(24,"span",23),t.qZA(),t.TgZ(25,"a",24),t.NdJ("click",function(){return i.onPocClick()}),t._UZ(26,"span",25),t.qZA(),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngClass",i.showActiveBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showDeleteBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showRemoveCaseLoadBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showDuplicateBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showEditBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showViewBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showFileBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showPostBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showUnpostBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showApproveBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showBillBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showUnapproveBtn?"":"d-none"),t.xp6(2),t.Q6J("ngClass",i.showPocBtn?"":"d-none"))},directives:[u.mk],styles:[""]}),m})()},9793:function(D,g,s){s.d(g,{H:function(){return k}});var t=s(7716),_=s(6826),u=s(1831),v=s(2664),m=s(9426),d=s(9344),o=s(4339),i=s(5300),l=s(2663),c=s(3679),C=s(1321),A=s(8682),B=s(1314),f=s(6640);function Z(a,h){if(1&a&&(t.TgZ(0,"ng-option",25),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.fullNameWithClient,"")}}function T(a,h){if(1&a&&(t.ynx(0),t.YNc(1,Z,2,2,"ng-option",24),t.BQk()),2&a){const e=h.$implicit;t.xp6(1),t.Q6J("ngIf",!e.deleted)}}function E(a,h){if(1&a){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div",16),t.TgZ(2,"div",17),t._UZ(3,"field-label",18),t.TgZ(4,"label",19),t._UZ(5,"i",20),t.qZA(),t.TgZ(6,"ng-select",21),t.NdJ("search",function(r){return t.CHM(e),t.oxw().searchStudent(r)})("ngModelChange",function(r){return t.CHM(e),t.oxw().selectedStudentsIds=r}),t.YNc(7,T,2,1,"ng-container",22),t.qZA(),t._UZ(8,"div",23),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("labelStr","Search Student Attach to Provider"),t.xp6(3),t.Q6J("multiple",!0)("loading",e.showSpinner)("dropdownPosition","bottom")("placeholder","search students")("searchFn",e.returnTrue)("clearable",!0)("ngModel",e.selectedStudentsIds),t.xp6(1),t.Q6J("ngForOf",e.studentsList)}}function M(a,h){if(1&a&&(t.ynx(0),t.TgZ(1,"ng-option",25),t._uU(2),t.qZA(),t.BQk()),2&a){const e=h.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name,"")}}function P(a,h){if(1&a){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div",26),t.TgZ(2,"div",27),t._UZ(3,"field-label",18),t.TgZ(4,"ng-select",28),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw().selectedClientId=r}),t.YNc(5,M,3,2,"ng-container",22),t.qZA(),t._UZ(6,"div",29),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("labelStr","Client"),t.xp6(1),t.Q6J("bindValue","id")("dropdownPosition","bottom")("placeholder","search client")("clearable",!0)("ngModel",e.selectedClientId),t.xp6(1),t.Q6J("ngForOf",e.clients)}}function S(a,h){if(1&a){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div",26),t.TgZ(2,"div",27),t._UZ(3,"field-label",18),t.TgZ(4,"ng-select",30),t.NdJ("change",function(r){return t.CHM(e),t.oxw().onProvidersChange(r)}),t.qZA(),t._UZ(5,"div",31),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("labelStr","Provider"),t.xp6(1),t.Q6J("items",e.users)("multiple",!e.isBulkStudentsAssign)("dropdownPosition","bottom")("placeholder","search user")}}const I=function(){return{backdropBorderRadius:"3px"}};let k=(()=>{class a{constructor(e,n,r,p,w,U){this.util=e,this.modalService=n,this.eventService=r,this.toastr=p,this.studentService=w,this.userService=U,this.user=null,this.providerId=null,this.studentId=null,this.type="attach-student",this.isBulkStudentsAssign=!1,this.selectedStudentsIds=[],this.onCaseLoadSaved=new t.vpe,this.studentsList=[],this.searchInterval=null,this.showSpinner=!1,this.isLoading=!1,this.providersToBeAttached=[],this.users=this.util.getBtsUsersListsFromSession(),this.clients=this.util.getBtsClientFromSession(),this.selectedClientId=null}ngOnInit(){}attachStudentprovider(){"attach-client"==this.type?this.attachClient():this.isBulkStudentsAssign?this.attachCaseLoads():this.attachProviders()}attachClient(){null!=this.selectedClientId&&(this.isLoading=!0,this.userService.attachClient(this.providerId,this.selectedClientId).then(e=>{this.isLoading=!1,this.onCaseLoadSaved.emit(),this.toastr.success("Client attached successfully","SUCCESS"),this.modalService.dismissAll()}).catch(e=>{this.isLoading=!1,this.toastr.error(e.message)}))}attachCaseLoads(){this.isLoading=!0,this.studentService.attachCaseLoads(this.selectedStudentsIds,this.providerId).then(e=>{this.isLoading=!1,this.onCaseLoadSaved.emit(),this.toastr.success("Attached","SUCCESS"),this.modalService.dismissAll()}).catch(e=>{this.isLoading=!1,this.toastr.error(e.message)})}attachProviders(){this.isLoading=!0;let e=this.providersToBeAttached.map(n=>n.id);this.studentService.attachStudentProvider(e,this.studentId).then(n=>{this.isLoading=!1,this.onCaseLoadSaved.emit(),this.toastr.success("Attached","SUCCESS"),this.modalService.dismissAll()}).catch(n=>{this.isLoading=!1,this.toastr.error(n.message)})}onCancelClicked(){this.modalService.dismissAll()}onProvidersChange(e){this.providersToBeAttached=e,this.isBulkStudentsAssign&&(this.providerId=null==e?void 0:e.id)}isSubmitDisable(){return!this.studentId&&!this.providerId}searchStudent(e){let n=e.term;clearTimeout(this.searchInterval),this.showSpinner=!1,this.util.isValidated(n.trim())&&!(n.length<3)&&(this.studentsList=[],this.showSpinner=!0,this.searchInterval=setTimeout(()=>{this.doSearchStudent(n.trim())},1e3))}doSearchStudent(e){let n=new _.sF;n.keyword=e,this.studentService.searchEntity(n).then(r=>{this.studentsList=this.studentService.getData(r).resultList,this.showSpinner=!1}).catch(r=>{this.showSpinner=!1,console.log(r)})}returnTrue(){return!0}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(u.Z),t.Y36(v.FF),t.Y36(m.P),t.Y36(d._W),t.Y36(o.V),t.Y36(i.a))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-attach-modal"]],inputs:{user:"user",providerId:"providerId",studentId:"studentId",type:"type",isBulkStudentsAssign:"isBulkStudentsAssign",selectedStudentsIds:"selectedStudentsIds"},outputs:{onCaseLoadSaved:"onCaseLoadSaved"},decls:18,vars:12,consts:[[3,"show","config"],["name","form",3,"ngSubmit","keydown.enter"],["addForm","ngForm"],[1,"modal-body","activity-entry"],[1,"row","no-select"],[1,"col-lg-12",2,"overflow","hidden"],[1,"form-body"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"form-group",2,"margin-bottom","0px"],["class","row",4,"ngIf"],[1,"modal-footer"],[1,"row","form-controls-right"],[3,"loader","type","isDisabled","text","saveBtnSizeAndStyle","cancelBtnSizeAndStyle","onCancelClick"],[1,"col-md-12"],[1,"form-group","has-danger"],[3,"labelStr"],["title","Indicate the Provider that the Student is for",1,"form-text","text-muted",2,"display","initial","margin-left","4px"],[1,"mdi","mdi-information-outline"],["appendTo","#ngselect1","name","student","bindLabel","fullNameWithClient",3,"multiple","loading","dropdownPosition","placeholder","searchFn","clearable","ngModel","search","ngModelChange"],[4,"ngFor","ngForOf"],["id","ngselect1",2,"position","fixed","background","rgba(0, 0, 255, 0.5)"],[3,"value",4,"ngIf"],[3,"value"],[1,"col-md-12","mx-auto","dropdown_container_min_height"],[1,"form-group"],["appendTo","#ngSelectClient","name","client","bindLabel","name",3,"bindValue","dropdownPosition","placeholder","clearable","ngModel","ngModelChange"],["id","ngSelectClient",2,"position","fixed","background","rgba(0, 0, 255, 0.5)"],["appendTo","#ngselect","bindLabel","fullName",1,"card-dropdown",3,"items","multiple","dropdownPosition","placeholder","change"],["id","ngselect",2,"position","fixed","background","rgba(0, 0, 255, 0.5)"]],template:function(e,n){if(1&e){const r=t.EpF();t._UZ(0,"ngx-loading",0),t.TgZ(1,"form",1,2),t.NdJ("ngSubmit",function(){return t.CHM(r),t.MAs(2).form.valid&&n.attachStudentprovider()})("keydown.enter",function(w){return w.preventDefault()}),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"div",10),t.TgZ(11,"div",11),t.YNc(12,E,9,9,"div",12),t.YNc(13,P,7,7,"div",12),t.YNc(14,S,6,5,"div",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",13),t.TgZ(16,"div",14),t.TgZ(17,"app-save-button",15),t.NdJ("onCancelClick",function(){return n.onCancelClicked()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.Q6J("show",n.isLoading)("config",t.DdM(11,I)),t.xp6(12),t.Q6J("ngIf","attach-student"==n.type),t.xp6(1),t.Q6J("ngIf","attach-client"==n.type),t.xp6(1),t.Q6J("ngIf","attach-student"!=n.type&&"attach-client"!=n.type),t.xp6(3),t.Q6J("loader",n.isLoading)("type","submit")("isDisabled",n.isSubmitDisable())("text","Attach")("saveBtnSizeAndStyle","btn-outline-success")("cancelBtnSizeAndStyle","btn-outline-danger"))},directives:[l.RJ,c._Y,c.JL,c.F,C.O5,A.t,B.t,f.w9,c.JJ,c.On,C.sg,f.xv],styles:[""]}),a})()}}]);